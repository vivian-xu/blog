---
title: 从文章到网页的操作流程以及 CI 设置
categories:
- 编程
tags:
- 记录
- 操作
- CI
---

记录一下,  才开始用的 CI 的流程，防止忘记～～

现在的这个博客, github 上有两个库, 一个是源代码的库，包括写的草稿，hexo 的构建系统，各种插件，等。 另一个是发布的库，就是 hexo deploy 后的 public 的那部分。

<!-- more -->
同时本地也有对应的两个文件夹。

流程：

#### 本地操作

1. 在本地的 源代码 库，写文章，做各种改动。然后，本地测试一下。

2. 生成 public 的发布部分，然后将 public 部分，copy 到 public 文件夹下。

3. 发布的库，确定一下无误， git push 到 github 上。

####  CI 部分

这一部分都已经配好了，不用我操作，就记录一下过程。

1. 上一部分的 github 设置了一个 webhook, 当 push 了新的东西的时候, 就会给 CI 发一个 post

2. CI 接收到了来自 github 的 post, 触发它开始运作，首先将这个仓库的代码 git pull 下来 ( 到服务器上的 dev 的文件夹 ), 然后在这里执行自定义命令

3. 关于上一步，我是没有自定义命令，因为我不是很需要。( 我是直接跳到第 5 步 ) 一般来说这里都会有 测试，确保文件和代码在线上没有问题。

4. 之后，应该还应该还有另一个 prod 的文件夹，当收到来自 dev 文件夹测试成功的消息后, 将某些文件 copy 来这个文件夹里。

5. 设置 nginx 静态资源指向 prod 文件夹, 当 prod 里面的文件发生变化，网页的内容页就会变化。

